<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Results Interpretation </title>
      <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" type="text/css" />
      <link rel="stylesheet" href="../static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="../static/sphinx_lesson.css" type="text/css" />
      <link rel="stylesheet" href="../static/sphinx_rtd_theme_ext_color_contrast.css" type="text/css" />
      <link rel="stylesheet" href="../static/tabs.css" type="text/css" />
      <link rel="shortcut icon" href="../../favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="" id="documentation_options" src="../static/documentation_options.js"></script>
        <script src="../static/jquery.js"></script>
        <script src="../static/underscore.js"></script>
        <script src="../static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../static/doctools.js"></script>
        <script src="../static/sphinx_highlight.js"></script>
        <script src="../static/clipboard.min.js"></script>
        <script src="../static/copybutton.js"></script>
        <script src="../static/minipres.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex/" />
    <link rel="search" title="Search" href="search/" />
    <link rel="next" title="Quick Reference" href="quick-reference/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home">ANACIN-X
              <img src="../images/anacin-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search " />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div
    



        ><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
          <ul>
            <li class="toctree-l1"><a class="reference internal" href="../system_setup/">System Setup</a></li>
            </ul>
              <p class="caption" role="heading"><span class="caption-text">Unit A</span></p>
<ul>

<li class="toctree-l1"><a class="reference internal" href="../mpi_and_nondeterminism/">1. MPI and Non-Determinism</a>
  <li class="toctree-l1"><a class="reference internal" href="../graphs/">2. Graphs</a></li>
  <li class="toctree-l1"><a class="reference internal" href="../tutorial_objectives/use_case_A.html">Use Case A</a></li>

  <p class="caption" role="heading"><span class="caption-text">Unit B</span></p>
  <li class="toctree-l1"><a class="reference internal" href="../anacin-x/">3. ANACIN-X</a></li>
  <li class="toctree-l1"><a class="reference internal" href="../benchmarks/">4. Benchmarks</a></li>
  <li class="toctree-l1"><a class="reference internal" href="../tutorial_objectives/use_case_B.html">Use Case B</a></li>

  <p class="caption" role="heading"><span class="caption-text">Unit C</span></p>
  <li class="toctree-l1"><a class="reference internal" href="../running_anacinx/"><span class="pre"></span>5. Running ANACIN-X</a></li>
  <li class="toctree-l1"><a class="reference internal" href="../results_interpretation/">6. Results Interpretation </a>
  <ul>
    <!-- <li class="toctree-l2"><a class="reference internal" href="#scenario">6.1 Scenario</a></li> -->
    <li class="toctree-l2"><a class="reference internal" href="#tracking_incorectness">6.1 Tracking Scientific Incorectness</a></li>
    <li class="toctree-l2"><a class="reference internal" href="#tracking_with_miniAMR">6.2 Tracking with miniAMR</a></li>
    <!-- <li class="toctree-l2"><a class="reference internal" href="#scenario">6.4 Other Results</a></li> -->
  </ul>
  </li>
  <li class="toctree-l1"><a class="reference internal" href="../tutorial_objectives/use_case_C.html">Use Case C</a></li>
</ul>



<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
  <li class="toctree-l1"><a class="reference internal" href="../bibliography/">Bibliography</a></li>
  <li class="toctree-l1"><a class="reference internal" href="../copyright/">Copyright and License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">ANACIN-X </a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Results Interpretation</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/TauferLab/ANACIN-X" class="fa fa-github">  GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scenario">
      <div class="admonition-objectives objectives admonition" id="objectives-0">
      <p class="admonition-title">Objectives</p>
      <ul class="simple">
      <li><p>Learn how to understand the results generated by ANACIN-X.</p></li>
      </ul>
      </div>   
<h1>Tracking Scientific Incorrectness with ANACIN-X <a class="headerlink" href="#lesson-name" title="Permalink to this heading"></a></h1>
<h2>Scenario</h2>
<p>
  Let us consider a scientist who, in conducting a meticulous experiment, initiates two separate runs of the identical codebase. And, the outcome from these runs diverges significantly, raising questions about the underlying factors influencing the code's behavior.</p> 

    <figure class="align-center" id="id4">
      <img alt="../images/results_interpretation_images/scientist1.png" src="../images/results_interpretation_images/scientist1.png" /><figcaption>
      <p><span class="caption-text">Different outputs at separate runs of same code</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
      </figcaption>
      </figure>
  

      <div id = "tracking_incorectness">

        <h2>Tracking Scientific Incorectness</h2>
        <p>
     
          The scientist uses ANACIN-X to pinpoint discrepancies between runs by generating Event Graphs for each run and plotting the KDTS (Kernel Distance Time Series).        </p> 
        
            <figure class="align-center" id="t">
              <img alt="../images/results_interpretation_images/Scintist2.png" src="../images/results_interpretation_images/Scintist2.png" /><figcaption>
              <p><span class="caption-text">Different outputs at separate runs of same code</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
              </figcaption>
              </figure>
  
      </div>
      
<section id="identifying_relevant">
  <span id="learner-personas"></span><h2>Identifying Relevant Source Code Location <a class="headerlink" href="#event_graphs" title="Permalink to this heading"></a></h2>
  <p>

    ANACIN-X automatically identifies an abrupt spike in kernel distance. These spikes imply sudden changes in the underlying communication non-determinism across
executions. This information helps to extract relevant source-code locations via call stack vertex labels.

    <br><br>
    Now, the scientist knows where to find the root cause of discrepant results.
  
</p>
  
  <figure class="align-center" id="id4">
    <img alt="../images/results_interpretation_images/scientist3.png" src="../images/results_interpretation_images/scientist3.png" /><figcaption>
    <p><span class="caption-text"> Identified root cause loacation.</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
    </figcaption>
    </figure>


</section>

<section id="tracking_with_miniAMR">
  <!-- <span id="learner-personas"></span><h2>Additional Results  <a class="headerlink" href="#graph_similarity" title="Permalink to this heading"></a></h2>
<p> Show Real results in benchmark applications. Show visualizations of other plots to teach interprete the results  </p>
   <figure class="align-center" id="id4">
    <img alt="../images/E01-pack_unpack.svg" src="../images/graph_images/similarity_graph.png" /><figcaption>
    <p><span class="caption-text"> </span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
    </figcaption>
    </figure> -->
    <h1> Tracking non-determinism with miniAMR</h1>
    <p> Here, we will provide an example of using ANACIN-X on identifying the root-cause of non-determinism in miniAMR benchmark application.</p>
    <p> The workflow of the root cause identification is outlined below:</p>
    <ol>
      <li> Trace 100 64-process runs of miniAMR with same configuration/inputs</li>
      <li> Build event graph for each run</li>
      <li>Partition each event graph into a sequence of subgraphs</li>
      <li>Compute WLST kernel distance between the all corresponding subgraphs across all runs</li>
      <li> Identify subgraphs where the distribution of kernel distance is anomalous (i.e., where communication is nondeterministic)</li>
      <li> Map back to locations in miniAMR source code via callstack vertex labels</li>
    </ol>

    <p>After the intial steps (1,2,3,4) ; the kernel distance time series are extracted from miniAMR event graphs over 120 slices, where 100 of the slices represent stencil communication steps, and remaining  represent mesh refinement events. For each slice, we plot the kernel distances as shown in the figure below.</p>

    <figure class="align-center" id="id4">
      <img alt="../images/results_interpretation_images/kdts.png" src="../images/results_interpretation_images/kdts.png" /><figcaption>
      <p><span class="caption-text"> miniAMR time step versus graph kernel distance distribution</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
      </figcaption>
      </figure> 
      <p>When the application alternates between sending low mean, low variance data (stencil communication) and larger data (mesh refinement), there's a noticeable increase in kernel distance during the mesh refinement.
<br><br>This suggests that miniAMR's mesh refinement and load-balancing communication patterns are significantly more non-deterministic than its stencil communication patterns.
      </p> 

      <h2>Mapping Root Causes via callstack labels</h2>
      <p>
        Figure below compares the categories of callstacks found in  anomalous slices (a) with those observed in non-anamolaus slices (b). Callstacks involved in mesh refinement and load-balancing cumulatively make up &asymp; 90% of all callstacks extracted from anomalous slices. In contrast, mesh refinement and load-balancing callstacks comprise a vanishing minority of the total in the non-anomalous slices.
      </p>
      <figure class="align-center" id="id4">
        <img alt="../images/results_interpretation_images/kdts.png" src="../images/results_interpretation_images/callstack.png" /><figcaption>
        <p><span class="caption-text"> Distributions of callstacks by category from (a) anomalous slices and (b) non-anomalous slices</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
        </figcaption>
        </figure> 
        <p>This demonstrates that ANACIN-X can locate the root causes of non-determinism purely by analyzing changes over time in kernel distances between executions.</p>
        <h3>Manual Analysis</h3>
        <p>To validate that these results are meaningful and useful, we conduct a manual analysis of the miniAMR source code to identify the call paths contributing to non-determinism. We observed that vast majority of non-deterministic MPI features like <em>MPI_Waitany</em>, <em>MPI_Testsome</em> are rooted at the refine function. </p>

</section>


<section id="conclusion">
  <h1>Conclusion</h1>
<p>In this chapter, we explored how ANACIN-X detects scientific errors and illustrated its use in identifying non-determinism with a benchmark application.</p>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
            <a href="../running_anacinx/" class="btn btn-neutral float-left" title="One-sided communication: synchronization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
            <a href="../tutorial_objectives/use_case_C.html" class="btn btn-neutral float-right" title="MPI and threads in practice" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>    </div>

    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Global Computing Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
